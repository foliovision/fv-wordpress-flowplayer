function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FV_Player_Dash_Js_DebugMock(){var t;return t={getLogger:function(e){return{fatal:function(e){t.log.fatal=e}.bind(e),error:function(e){t.log.error=e}.bind(e),warn:function(e){t.log.warn=e}.bind(e),info:function(e){t.log.info=e}.bind(e),debug:function(e){t.log.debug=e}.bind(e)}},log:{}}}(()=>{function e(i,D){function o(e,t,a){return"application/dash+xml"===e.toLowerCase()&&p.isTypeSupported(t+';codecs="'+a+'"')&&(a.indexOf("mp4a.40.5")<0||n.indexOf("Android")<0)}function e(m,b){function v(e,t,a){var o={code:e};return 2<e&&(o.video=F(m.video,{src:t,url:a||t})),o}function d(a,t,e){function o(e){return isNaN(Number(e))?e.level:e}function r(e,t,a,o){-1==(e=Math.min(e,t.length-1))?S.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0},limitBitrateByPortal:!0,usePixelRatioInLimitBitrateByPortal:!0}}}):o?S.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0},minBitrate:{video:t[e].bandwidth/1e3}}}}):S.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1},initialBitrate:{video:t[e].bandwidth/1e3}}}}),a&&(m.video.quality=e)}var i,n,s=[],u=0,l=a&&c.inlineVideo&&1===e.Period_asArray.length&&(!P||A.qualitiesForSafari);if(l&&(e.Period_asArray[0].AdaptationSet_asArray.forEach(function(e){var t=e.Representation_asArray,a=e.mimeType||t[0].mimeType;0===a.indexOf("video/")?s=s.concat(t.filter(function(e){e=(e.mimeType||a)+";codecs="+e.codecs;return p.isTypeSupported(e)})):0===a.indexOf("audio/")&&(u=u||t[0].bandwidth)}),!(s.length<2)))if(s.sort(function(e,t){return e.bandwidth-t.bandwidth}),localStorage.FVPlayerDashQuality&&(Object.keys(s).forEach(function(e){m.conf.dash&&"restore"==m.conf.dash.initialVideoQuality&&localStorage.FVPlayerDashQuality<=s[e].height&&(t=m.conf.dash.initialVideoQuality=e,console.log("restoring quality "+localStorage.FVPlayerDashQuality+" => "+e))}),m.conf.dash)&&"restore"==m.conf.dash.initialVideoQuality&&(t=m.conf.dash.initialVideoQuality=s.length-1),l){switch(_typeof(a)){case"object":n=a.map(o);break;case"string":n=a.split(/\s*,\s*/).map(Number);break;default:(n=s.map(function(e,t){return t})).unshift(-1)}(n=n.filter(function(e){return e<s.length&&-2<e})).length<2||(m.video.qualities=n.map(function(t){var e=s[t],e=("object"===_typeof(a)?a.filter(function(e){return o(e)===t})[0]:t).label||(t<0?"Auto":Math.min(e.width,e.height)+"p ("+Math.round((e.bandwidth+u)/1e3)+"k)");return{value:t,label:e}}),D.conf.hd_streaming&&!D.support.fvmobile?(i=-1,Object.keys(s).forEach(function(e){-1==i&&(720<=s[e].height||1280<=s[e].width)&&(i=e)}),r(i,s,!0,!0)):r(t,s,!0))}else r(t,s)}var S,w,e,k=D.bean,c=D.support,f=c.browser,P=f.safari&&c.dataload,_=!1,t={engineName:E,pick:function(e){e=e.filter(function(e){var t=e.dashType||A.type,a=e.dashCodecs||A.codecs;return o(e.type,t,a)})[0];return"string"==typeof e.src&&(e.src=C.createAbsoluteUrl(e.src)),e},load:function(e){var t,p=m.conf,g=F(A,p.dash,e.dash),u=e.dashQualities||p.dashQualities,a={ended:"finish",loadeddata:"ready",pause:"pause",play:"resume",progress:"buffer",ratechange:"speed",seeked:"seek",timeupdate:"progress",volumechange:"volume",error:"error",waiting:"waiting"},o=i.MediaPlayer.events,r=e.dash&&e.dash.protection,l=!!e.autoplay||!!p.autoplay||!!p.splash,y="is-poster",h=0;!1===e.dashQualities||T?u=!1:void 0===u&&(u=!0),S?S.reset():((w=C.findDirect("video",b)[0]||C.find(".fp-player > video",b)[0])&&(C.find("source",w).forEach(function(e){e.removeAttribute("src")}),w.removeAttribute("src"),w.load(),C.removeNode(w)),w=C.createElement("video",{class:"fp-engine dash-engine"}),Object.keys(a).forEach(function(e){var d,c=a[e],f=e+"."+E;k.on(w,f,function(e){p.debug&&c.indexOf("progress")<0&&console.log(f,"->",c,e.originalEvent);var t,a,o=w.currentTime,r=S.time&&S.time()||o,i=S.duration(),n=w.buffered,s=[],u=m.video,l=u.src;switch(c){case"ready":d=F(u,{duration:i,seekable:i,width:w.videoWidth,height:w.videoHeight,url:l});break;case"resume":T&&m.poster&&(C.removeClass(b,y),m.poster=!1);break;case"seek":d=r;break;case"progress":d=m.live&&!m.dvr?o-(h=!h&&o?o:h):r;break;case"speed":if(!g.debug)return void e.preventDefault();d=w.playbackRate;break;case"volume":d=w.volume;break;case"buffer":for(t=0;t<n.length;t+=1)s.push(n.end(t));if(d=s.filter(function(e){return r<=e}).sort()[0],void 0===(u.buffer=d))return;break;case"error":a=w.error&&w.error.code,d=v(a,l);break;case"waiting":w.currentTime>w.duration-.5&&(console.log("FV Player DASH: Triggering video end!"),m.trigger("finish",[m]))}m.trigger(c,[m,d])})}),m.on("error."+E,function(){S&&m.engine.unload()}),T?p.poster&&m.one("ready."+E,t=function(e){"stop"!==e.type&&l||setTimeout(function(){m.poster||(C.addClass(b,y),m.poster=!0)})}).on("stop."+E,t):m.on("quality."+E,function(e,t,a){S.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:a<0},limitBitrateByPortal:-1==a,usePixelRatioInLimitBitrateByPortal:-1==a}}}),-1<a&&S.setQualityFor("video",a),0}),C.prepend(C.find(".fp-player",b)[0],w)),S=i.MediaPlayer().create(),m.engine[E]=S,r&&(S.setProtectionData(r),S.on(i.Protection.events.KEY_SYSTEM_SELECTED,function(e){e.data.keySystem.systemString})),S.updateSettings({streaming:{fastSwitchEnabled:n.indexOf("Trident/7")<0,lastBitrateCachingInfo:{enabled:!1},scheduleWhilePaused:!0,useSuggestedPresentationDelay:g.useSuggestedPresentationDelay}}),"number"==typeof g.liveDelay&&S.updateSettings({streaming:{liveDelay:g.liveDelay}}),"number"==typeof g.liveDelayFragmentCount&&S.updateSettings({streaming:{liveDelayFragmentCount:g.liveDelayFragmentCount}}),g.xhrWithCredentials&&g.xhrWithCredentials.length&&g.xhrWithCredentials.forEach(function(e){S.setXHRWithCredentialsForType(e,!0)}),Object.keys(o).forEach(function(i){var e=o[i],n=E+e.charAt(0).toUpperCase()+e.slice(1),t=g.listeners,s=t&&-1<t.indexOf(n);S.on(e,function(e){var t,a=m.video.src,o=m.video.dash,r="is-loading";m.conf.errors;switch(i){case"MANIFEST_LOADED":f.chrome&&o&&o.protectionLevel&&S.getProtectionController().setRobustnessLevel(o.protectionLevel),d(u,g.initialVideoQuality,e.data);break;case"CAN_PLAY":P&&l&&(C.addClass(b,r),k.one(w,"timeupdate."+E,function(){setTimeout(function(){C.removeClass(b,r)})}));break;case"BUFFER_LEVEL_STATE_CHANGED":C.toggleClass(b,"is-seeking","bufferStalled"===e.state);break;case"PLAYBACK_NOT_ALLOWED":if(!p.mutedAutoplay)throw new Error("Unable to autoplay");m.debug("Play errored, trying muted",e),P?(console.log("FV Player: Safari autoplay of Dash video blocked, retrying..."),_=!0):(m.mute(!0,!0),w&&(w.volume=0),m.play());break;case"ERROR":t=v(4,a),m.trigger("error",[m,t]);break;case"PLAYBACK_PAUSED":D.support.browser.chrome&&!D.support.android&&m.loading&&m.paused&&!m.ready&&!m.playing&&m.one("ready",function(e,t){t.trigger("pause")});break;case"PLAYBACK_STALLED":_&&(_=!1,console.log("FV Player: Safari autoplay of Dash video recovery"),m.mute(!0,!0),w.autoplay=!0,m.paused=!0,m.play())}s&&m.trigger(n,[m,e])})}),m.video=e,2.6<=parseFloat(i.Version)&&e.manifest?(S.initialize(w,!1,l),(t=i.FactoryMaker.getClassFactory({__dashjs_factory_name:"DashParser"})({}).create({debug:new FV_Player_Dash_Js_DebugMock,errorHandler:{manifestError:function(e,t,a,o){console.log("FV Player DashParser error",e,o)}}}).parse(e.manifest)).loadedTime=new Date,S.attachSource(t)):S.initialize(w,e.src,l),!c.firstframe&&c.dataload&&!f.mozilla&&l&&w.paused&&w.load()},resume:function(){S.play()},pause:function(){S.pause()},seek:function(e){S.seek(e)},volume:function(e){w&&(w.volume=isNaN(e)?1:e)},mute:function(e){w&&(w.muted=!!e,e?w.volume=0:localStorage.volume&&(w.volume=localStorage.volume),m.trigger("volume",[m,w.volume]),m.trigger("mute",[m,e]))},speed:function(e){w.playbackRate=e,m.trigger("speed",[m,e])},unload:function(){var e;S&&(e="."+E,S.reset(),S=0,m.off(e),k.off(b,e),k.off(w,e),C.removeNode(w),w=0)}};return/^6\.0\.[0-3]$/.test(a)&&!m.conf.splash&&!m.conf.poster&&!m.conf.autoplay&&(e=C.css(b,"backgroundColor"),"none"!==C.css(b,"backgroundImage")||e&&"rgba(0, 0, 0, 0)"!==e&&"transparent"!==e)&&(m.conf.poster=!0),t}var A,E="dash",p=window.MediaSource||window.WebKitMediaSource,n=navigator.userAgent,C=D.common,F=D.extend,a=D.version,T=0===a.indexOf("6.");p&&"function"==typeof p.isTypeSupported&&0!==a.indexOf("5.")&&(e.engineName=E,e.canPlay=function(e,t){return A=F({type:"video/mp4",codecs:"avc1.42c01e,mp4a.40.2",initialVideoQuality:-1,qualitiesForSafari:!0},t[E],t.clip[E]),o(e,A.type,A.codecs)},D.engines.unshift(e))}"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e.bind(void 0,require("dashjs")):window.dashjs&&window.flowplayer&&e(window.dashjs,window.flowplayer)})();
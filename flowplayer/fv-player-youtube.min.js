var tag,fv_player_pro_youtube_get_video_id,fv_player_pro_youtube_addRemovableEventListener,fv_player_pro_youtube_onReady,fv_player_pro_youtube_onStateChange,fv_player_pro_youtube_onError,fv_player_pro_youtube_is_mobile,fv_player_pro_youtube_is_old_android,fv_player_pro_youtube_player_vars,fv_player_pro_youtube_preload;fv_flowplayer_conf.youtube&&(window.jQuery?jQuery.getScript("https://www.youtube.com/iframe_api"):((tag=document.createElement("script")).src="https://www.youtube.com/iframe_api",document.body.appendChild(tag))),"undefined"!=typeof flowplayer&&(fv_player_pro_youtube_get_video_id=function(e){var o;return((o=(o=e.match(/(?:\?|&)v=([a-zA-Z0-9_-]+)(?:\?|$|&)/))||((o=e.match(/youtu.be\/([a-zA-Z0-9_-]+)(?:\?|$|&)/))||e.match(/embed\/([a-zA-Z0-9_-]+)(?:\?|$|&)/)))||!!(o=e.match(/shorts\/([a-zA-Z0-9_-]+)/)))&&o[1]},fv_player_pro_youtube_addRemovableEventListener=function(e,o,t){var r="youtubeCallbackFunction"+Math.random().toString(36).substr(2,7);return window[r]=t,e.addEventListener(o,r),function(){window[r]=function(){},void 0!==e.removeEventListener&&e.removeEventListener(o,r)}},fv_player_pro_youtube_onReady=function(e){e=jQuery(e.target.getIframe()).closest(".flowplayer"),e.removeClass("is-loading"),e=e.data("flowplayer");e.loading=!1,e.trigger("yt-ready"),jQuery(document).trigger("fv-player-yt-api-loaded")},fv_player_pro_youtube_onStateChange=function(e){var o=jQuery(e.target.getIframe()).parents(".flowplayer");switch(e.data){case-1:jQuery(".fp-splash",o).css("pointer-events",""),o.addClass("is-loading");break;case YT.PlayerState.PLAYING:o.data("flowplayer").load();break;case YT.PlayerState.BUFFERING:o.addClass("is-loading")}},fv_player_pro_youtube_onError=function(e){var o=jQuery(e.target.getIframe()).parents(".flowplayer"),t=o.data("flowplayer"),e=(fv_player_log("FV Player Youtube onError for preloaded player",e),(0<t.video.index?t.conf.playlist[t.video.index]:t.conf.clip).sources[0].src);fv_player_track(t,!1,"Video "+(o.hasClass("is-cva")?"Ad ":"")+"error","YouTube video removed",e),setTimeout(function(){o.removeClass("is-splash"),t.loading=!1,o.removeClass("is-loading"),1<t.conf.clip.sources.length?(t.youtube.destroy(),t.youtube=!1,jQuery(".fvyoutube-engine",o).remove(),jQuery(".fv-pf-yt-temp2",o).remove(),jQuery(o).removeClass("is-ytios11"),jQuery(".fp-ui",o).css("background-image",""),jQuery(".fp-ui",o).append('<div class="wpfp_custom_popup fp-notice-load" style="height: 100%"><div class="wpfp_custom_popup_content">'+fv_flowplayer_translations.video_loaded+"</div></div>"),jQuery(".fp-notice-load").one("click",function(){jQuery(".fp-notice-load",o).remove(),t.trigger("error",[t,{code:4,video:t.video}])})):(t.paused=!1,o.removeClass("is-paused"),t.ready=!0,t.bind("load",function(){t.ready=!1}),setTimeout(function(){t.next()},1e3))})},fv_player_pro_youtube_is_mobile=function(){return!flowplayer.support.firstframe||flowplayer.support.android||flowplayer.support.iOS||flowplayer.support.browser.safari},fv_player_pro_youtube_is_old_android=function(){return flowplayer.support.android&&flowplayer.support.android.version<4.4},fv_player_pro_youtube_player_vars=function(e,o,t){e={videoId:e,width:o.width,height:o.height,playerVars:{autoplay:0,controls:!jQuery(o).hasClass("no-controlbar")&&fv_player_pro_youtube_is_old_android()?1:0,disablekb:1,enablejsapi:1,fs:0,html5:1,iv_load_policy:3,loop:0,modestbranding:1,origin:"https:"==document.location.protocol?"https://":"http://"+flowplayer.conf.hostname,playsinline:1,rel:0,showinfo:0,showsearch:0,start:0,t0:1,widget_referrer:window?window.location.href:null}};return fv_flowplayer_conf.youtube_cookies||(e.host="https://www.youtube-nocookie.com"),t&&(e.events=t),e},fv_player_pro_youtube_preload=function(e,t){var r,a,i=jQuery(e);!((t=t||i.data("flowplayer"))&&t.conf.item&&"video/youtube"==t.conf.item.sources[0].type||t&&t.conf.clip&&"video/youtube"==t.conf.clip.sources[0].type)||1==t.loading||t.youtube||t.video.index||(t.loading=!0,i.addClass("is-loading"),e=flowplayer.common,r=t.conf.item?fv_player_pro_youtube_get_video_id(t.conf.item.sources[0].src):fv_player_pro_youtube_get_video_id(t.conf.clip.sources[0].src),e.removeNode(e.findDirect("video",i)[0]||e.find(".fp-player > video",i)[0]),(a=e.createElement("div")).className="fp-engine fvyoutube-engine",e.prepend(e.find(".fp-player",i)[0],a),jQuery(document).one("fv-player-yt-api-loaded",function(){var o;("undefined"==typeof YT||void 0===YT.Player)&&window.fv_player_pro_yt_loading||(window.fv_player_pro_yt_loading=!0,o=setInterval(function(){var e;t.loading=!0,i.addClass("is-loading"),"undefined"!=typeof YT&&void 0!==YT.Player&&(clearInterval(o),t.youtube=new YT.Player(a,fv_player_pro_youtube_player_vars(r,i)),jQuery(".fp-engine.fvyoutube-engine",i)[0].allowFullscreen=!1,e=jQuery(".fp-splash",i),jQuery(".fp-ui",i).before(e),e.css("pointer-events","none"),jQuery(".fp-ui",i).before('<div class="fv-pf-yt-temp2"></div>'),flowplayer.support.iOS&&11<flowplayer.support.iOS.version&&(jQuery(i).addClass("is-ytios11"),jQuery(i).find(".fv-pf-yt-temp2").on("click",function(){t.toggle()})),t.fv_yt_onReady=fv_player_pro_youtube_addRemovableEventListener(t.youtube,"onReady",fv_player_pro_youtube_onReady),t.fv_yt_onStateChange=fv_player_pro_youtube_addRemovableEventListener(t.youtube,"onStateChange",fv_player_pro_youtube_onStateChange),t.fv_yt_onError=fv_player_pro_youtube_addRemovableEventListener(t.youtube,"onError",fv_player_pro_youtube_onError))},50))}),window.fv_player_pro_yt_load)||(window.fv_player_pro_yt_load=!0,jQuery(document).trigger("fv-player-yt-api-loaded"))},function(){function o(l,s){function t(e){var o=e.getPlaybackQuality(),t={seekable:!0,src:e.getVideoUrl()};return t.duration=e.getDuration(),o&&void 0!==a[o]&&(t.width=a[o].width,t.height=a[o].height,t.quality=o,t.qualityLabel=i.qualityLabels[o],t.bitrate=a[o].bitrate),"function"==typeof e.getVideoData&&(o=e.getVideoData()).title&&(t.fv_title="YouTube: "+o.title+" ("+o.video_id+")"),t}function d(e){fv_player_log("FV Player Youtube onError",e);e=(0<l.video.index?l.conf.playlist[l.video.index]:l.conf.clip).sources[0].src;fv_player_track(l,!1,"Video "+(s.hasClass("is-cva")?"Ad ":"")+"error","YouTube video removed",e),s.addClass("is-splash"),0==l.conf.playlist.length||1<l.conf.clip.sources.length?l.trigger("error",[l,{code:4,video:l.video}]):setTimeout(function(){l.loading=!1,s.removeClass("is-loading"),l.paused=!1,s.removeClass("is-paused"),l.ready=!0,l.bind("load",function(){l.ready=!1}),setTimeout(function(){l.next()},5e3)})}function p(){l.one("ready progress",function(){var t,o,r,e,a;-1<v.getOptions().indexOf("captions")&&(l.video.subtitles?v.unloadModule("captions"):(t=v.getOption("captions","track"),0==(o=v.getOption("captions","tracklist"))?v.loadModule("captions"):(v.setOption("captions","fontSize",1),e=(r=flowplayer.common).find(".fp-captions",s)[0],e=(e=r.find(".fp-subtitle",s)[0])||r.appendTo(r.createElement("div",{class:"fp-captions"}),r.find(".fp-player",s)[0]),Array.prototype.forEach.call(e.children,r.removeNode),e=s.find(".fp-cc")[0]||r.createElement("strong",{className:"fp-cc"},"CC"),a=s.find(".fp-subtitle-menu")[0]||r.createElement("div",{className:"fp-menu fp-subtitle-menu"},"<strong>Closed Captions</strong>"),r.find("a",a).forEach(r.removeNode),a.appendChild(r.createElement("a",{"data-yt-subtitle-index":-1},"No subtitles")),(o||[]).forEach(function(e,o){o=r.createElement("a",{"data-yt-subtitle-index":o},e.displayName);t&&t.languageCode&&t.languageCode==e.languageCode&&jQuery(o).addClass("fp-selected"),a.appendChild(o)}),r.find(".fp-ui",s)[0].appendChild(a),r.find(".fp-controls",s)[0].appendChild(e),s.find(".fp-cc").removeClass("fp-hidden"),jQuery(document).on("click",".fp-subtitle-menu a",function(e){e.preventDefault(),jQuery("a[data-yt-subtitle-index]").removeClass("fp-selected"),jQuery(this).addClass("fp-selected"),o[jQuery(this).data("yt-subtitle-index")]?(null==s.data("fv-player-youtube-nl")&&s.data("fv-player-youtube-nl",s.hasClass("is-youtube-nl")),s.removeClass("is-youtube-nl"),v.setOption("captions","track",{languageCode:o[jQuery(this).data("yt-subtitle-index")].languageCode})):(s.data("fv-player-youtube-nl")&&s.addClass("is-youtube-nl"),v.unloadModule("captions"))}))))})}function f(){0==v.getDuration()&&(l.live=!0,jQuery(s).addClass("is-live"));var e=jQuery.extend(c,t(v));if(!l.ready){l.mute(!0,!0),v.playVideo();try{l.one("ready",function(){l.trigger("resume",[l])}),l.trigger("ready",[l,e])}catch(e){}}l.ready=!0,u&&jQuery(".fp-ui",s).hide(),(flowplayer.support.iOS.version<11||flowplayer.support.android.version<5)&&(s.find(".fp-speed").hide(),l.YTErrorTimeout=setTimeout(function(){l.error||-1!=v.getPlayerState()||l.trigger("error",[l,{code:4,video:l.video}])},1e3))}function y(e){switch(0==s.find(".fv-fp-no-picture.is-active").length&&jQuery(".fvyoutube-engine",s).show(),e.data){case-1:jQuery(".fp-splash",s).css("pointer-events",""),l.playing=!1,l.paused=!0,setTimeout(function(){-1==v.getPlayerState()&&(fv_player_log("This video did not start yet!"),s.removeClass("is-youtube-nl"))},1e3);break;case YT.PlayerState.BUFFERING:"function"==typeof v.getCurrentTime&&l.trigger("seek",[l,v.getCurrentTime()]);break;case YT.PlayerState.CUED:s.removeClass("is-loading"),s.addClass("is-paused"),l.loading=!1,flowplayer.support.firstframe||(o=jQuery("[rel="+s.attr("id")+"] span").eq(l.video.index),jQuery(".fv-pf-yt-temp",s).css("background-image",o.css("background-image")),flowplayer.support.dataload||jQuery(".fp-ui",s).hide(),jQuery(".fv-pf-yt-temp",s).show(),jQuery(".fv-pf-yt-temp-play",s).show());break;case YT.PlayerState.ENDED:l.playing=!1,clearInterval(n),n=!1,l.trigger("pause",[l]),l.trigger("finish",[l]),jQuery(".fvyoutube-engine",s).hide(),jQuery(".fv-pf-yt-temp2",s).show(),jQuery(".fp-ui",s).show();break;case YT.PlayerState.PAUSED:1===l.youtube_unmute_attempted?(l.youtube_unmute_attempted=2,fv_player_log("FV FP YouTube: Volume restore failed."),l.mute(!0,!0),v.playVideo(),jQuery("body").one("click",function(){l&&l.ready&&(fv_player_log("FV FP YouTube: Volume restore on click."),l.volume(l.volumeLevel))})):l.seeking?v.playVideo():(clearInterval(n),n=!1,l.trigger("pause",[l]));break;case YT.PlayerState.PLAYING:var o;jQuery.extend(l.video,t(v)),f(),r(),u&&((o=jQuery(".fp-ui",s)).show(),jQuery(".fp-splash",s).css("pointer-events",""),!jQuery(s).hasClass("no-controlbar")&&fv_player_pro_youtube_is_old_android()||flowplayer.support.iOS&&flowplayer.support.iOS.version<10)&&o.hide(),l.seeking&&(l.seeking=!1,"function"==typeof v.getCurrentTime)&&l.trigger("seek",[l,v.getCurrentTime()]),l.paused&&l.trigger("resume",[l]),l.one("progress",function(){!l.youtube_unmute_attempted&&v.isMuted()&&(fv_player_log("FV FP YouTube: Trying to restore volume to "+l.volumeLevel),l.volume(l.volumeLevel),l.youtube_unmute_attempted=1,setTimeout(function(){l.youtube_unmute_attempted=!1},500))}),window.fv_player_pro&&fv_player_pro.youtube_nl&&s.addClass("is-youtube-nl")}}function r(){var o=!1;n=n||setInterval(function(){var e;void 0!==v&&void 0!==v.getCurrentTime&&(e=v.getCurrentTime(),u&&(void 0!==l.seeking&&l.seeking&&o&&o<e&&l.trigger("seek",[l]),o=e),e=l.video.time=0<e?e:0,l.live&&(e-=b=0==b?e:b),l.trigger("progress",[l,e]),(e=v.getVideoLoadedFraction()*l.video.duration+.5)<l.video.duration&&!l.video.buffered?(l.video.buffer=e,l.trigger("buffer",[l,l.video.buffer])):l.video.buffered||(l.video.buffered=!0,l.trigger("buffer",[l,l.video.buffer]).trigger("buffered",[l])))},250)}var c,v,a={small:{width:320,height:240,bitrate:64},medium:{width:640,height:360,bitrate:512},large:{width:854,height:480,bitrate:640},hd720:{width:1280,height:720,bitrate:2e3},hd1080:{width:1920,height:1080,bitrate:4e3}},i={bitrates:!1,defaultQuality:"default",activeClass:"active",qualityLabels:{medium:"medium",large:"large",hd720:"hd"}},_=flowplayer.common,n=!1,u=fv_player_pro_youtube_is_mobile(),s=jQuery(s),b=0,e={engineName:o.engineName,load:function(e){b=0;var o,t,r,a,i,n,u=fv_player_pro_youtube_get_video_id((c=e).src);u?(v?flowplayer.support.dataload||flowplayer.support.inlineVideo?v.loadVideoById(u,0,"default"):v.cueVideoById(u,0,"default"):l.youtube&&l.youtube.getIframe()?(v=l.youtube,l.fv_yt_onReady(),l.fv_yt_onStateChange(),l.fv_yt_onError(),v.addEventListener("onReady",f),v.addEventListener("onStateChange",y),v.addEventListener("onError",d),v.addEventListener("onApiChange",p),f(),y({data:1}),p(),flowplayer.support.dataload||flowplayer.support.inlineVideo?v.loadVideoById(u,0,"default"):(v.cueVideoById(u,0,"default"),setTimeout(function(){f()},100))):(_.removeNode(_.findDirect("video",s)[0]||_.find(".fp-player > video",s)[0]),(o=_.createElement("div")).className="fp-engine fvyoutube-engine",_.prepend(_.find(".fp-player",s)[0],o),t=setInterval(function(){var e;"undefined"!=typeof YT&&void 0!==YT.Player&&(clearInterval(t),v=new YT.Player(o,fv_player_pro_youtube_player_vars(u,s,{onReady:f,onStateChange:y,onError:d,onApiChange:p})),(e=jQuery(".fp-engine.fvyoutube-engine",s))[0].allowFullscreen=!1,e.on("webkitfullscreenchange",function(){return document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),!1}))},5)),r=flowplayer.support.fullscreen,a=window,l.fullscreen=function(e){var o=jQuery(s).find(".fp-player")[0];if(!l.disabled)return(e=void 0===e?!l.isFullscreen:e)&&(n=a.scrollY,i=a.scrollX),r?e?["requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].forEach(function(e){if("function"==typeof o[e])return o[e](Element.ALLOW_KEYBOARD_INPUT),"webkitRequestFullScreen"!==e||document.webkitFullscreenElement||o[e](),!1}):["exitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].forEach(function(e){"function"==typeof document[e]&&document[e]()}):l.trigger(e?"fullscreen":"fullscreen-exit",[l]),l},l.on("fullscreen-exit",function(){a.scrollTo(i,n)})):(s.find(".fp-ui").append('<div class="fp-message"><h2>'+fv_flowplayer_translations.invalid_youtube+"</h2></div>"),s.addClass("is-error").removeClass("is-loading"))},mute:function(e){void 0!==v&&(l.muted=!!e,e?v.mute():v.unMute(),l.trigger("mute",[l,e]))},pause:function(){clearInterval(l.YTErrorTimeout),v.pauseVideo()},pick:function(e){for(var o,t=0;t<e.length;t+=1)if((o=e[t]).src.match(/(youtube\.com|youtube-nocookie\.com|youtu\.be)/))return o.src.match(/\/shorts\//)&&(o.src=o.src.replace("/shorts/","/watch?v=")),o},resume:function(){l.finished,void 0!==v.playVideo&&v.playVideo()},seek:function(e){v.seekTo(e,!0),l.seeking=!0,c.currentTime=e,r()},speed:function(e){v.setPlaybackRate(parseFloat(e)),l.trigger("speed",[l,e])},stop:function(){v.stopVideo()},unload:function(){clearInterval(n),fv_player_pro_youtube_is_mobile()?v.stopVideo():v.destroy(),l.youtube_unmute_attempted=!1,l.one("load",function(e,o){fv_player_pro_youtube_is_mobile()&&"fvyoutube"!=o.engine.engineName&&(clearInterval(n),v.destroy(),l.youtube=!1,jQuery(".fvyoutube-engine",s).remove(),jQuery(".fv-pf-yt-temp2",s).remove(),jQuery(s).removeClass("is-ytios11"))}),flowplayer.support.firstframe||l.one("ready",function(e,o){o.stop()})},volume:function(e){"function"==typeof v.setVolume&&(0<e&&l.mute(!1),l.volumeLevel=e,v.setVolume(100*e),l.trigger("volume",[l,e]))}};return jQuery(document).on("afterClose.fb beforeLoad.fb",function(){v&&l.lightbox_visible&&!l.lightbox_visible()&&l.is_in_lightbox&&l.is_in_lightbox()&&(l.trigger("unload",[l]),v.destroy(),v=!1)}),e}o.engineName="fvyoutube",o.canPlay=function(e){return/video\/youtube/i.test(e)},flowplayer.engines.push(o),flowplayer(function(e,o){jQuery(o).hasClass("lightboxed")||fv_player_pro_youtube_is_mobile()&&setTimeout(function(){fv_player_pro_youtube_preload(o,e)})}),jQuery(document).ready(function(){fv_player_pro_youtube_is_mobile()&&jQuery(document).on("afterShow.fb",function(){jQuery(".fancybox-slide--current .flowplayer").each(function(){fv_player_pro_youtube_preload(this)})})})}()),"undefined"!=typeof flowplayer&&flowplayer(function(e,o){e.on("ready beforeseek",function(){"fvyoutube"==e.engine.engineName?void 0!==e.youtube&&"function"==typeof e.youtube.getAvailablePlaybackRates&&(e.conf.backupSpeeds=e.conf.speeds,e.conf.speeds=e.youtube.getAvailablePlaybackRates()):(e.youtube&&(e.youtube.destroy(),e.youtube=!1,jQuery(".fp-ui",o).css("background-image",""),jQuery(".fvyoutube-engine",o).remove(),jQuery(".fv-pf-yt-temp2",o).remove(),jQuery(o).removeClass("is-ytios11")),void 0!==e.conf.backupSpeeds&&(e.conf.speeds=e.conf.backupSpeeds))}),void 0!==jQuery.fn.fitVids&&jQuery(o).addClass("fitvidsignore")});